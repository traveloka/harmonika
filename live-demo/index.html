<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>ES5toES6</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/default.min.css">
    <link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/monokai_sublime.css">
    <style>
        #es5,#es6 {
            position: fixed;
            width: 49%;
            height: auto;
            margin: 0;
            top: 0px;
            bottom: 0;
        }
        #es6 {
            right: 0;
            font-size: 11px;
            line-height: 11px;
        }
    </style>
</head>
<body>

    <div id="main-wrap" class="group">
        <section>
            <pre class="section" id="es5">goog.provide('tv.service.flight.FlightBookingService');

goog.require('tv.service.TvServiceBase');

/**
 *
 * @param {tv.core.comm.context.TvContextProvider} contextProvider
 * @param {tv.core.comm.context.TvUserContext} userContext
 * @param {Object} options
 * @extends {tv.service.TvServiceBase}
 * @constructor
 */
tv.service.flight.FlightBookingService = function(contextProvider, userContext, options) {
  tv.service.TvServiceBase.call(this, contextProvider, userContext);

  /**
   *
   * @type {tv.Url}
   * @private
   */
  this._apiUrl = options.apiUrl;

  /**
   *
   * @type {string}
   * @private
   */
  this._agentId = options.agentId;

  /**
   *
   * @type {string}
   * @private
   */
  this._token = options.bookingToken;

  /**
   *
   * @enum {string}
   */
  this.API = {
    USER_VALIDATION: 'contact',
    PAX_VALIDATION: 'isPaxValid',
    SOCIOMANTIC: 'monitor/sociomantic',
    BOOKING: 'booking'
  };
};

goog.inherits(tv.service.flight.FlightBookingService, tv.service.TvServiceBase);

/**
 *
 * @param {string} url
 * @returns {string}
 * @private
 */
tv.service.flight.FlightBookingService.prototype._getAPIUrl = function(url) {
  var apiUrl = '/partner/' + this._agentId + '/' + url;
  var queryString = {
    token: this._token
  };

  return this._apiUrl.pathAuto(apiUrl, queryString);
};

/**
 * This is returns because we use promise
 *
 * @param data
 * @returns {jQuery.jqXHR}
 */
tv.service.flight.FlightBookingService.prototype.validateUser = function(data) {
  return $.ajax({
    url : this._getAPIUrl(this.API.USER_VALIDATION),
    data : JSON.stringify(data),
    timeout: 120000
  });
};

/**
 *
 * @param data
 * @param successCallback
 * @param errorCallback
 */
tv.service.flight.FlightBookingService.prototype.getSociomanticData = function(data, successCallback, errorCallback) {
  $.ajax({
    url: this._getAPIUrl(this.API.SOCIOMANTIC),
    data: JSON.stringify(data),
    success: successCallback,
    timeout: 120000,
    error: errorCallback
  });
};

/**
 *
 * @param data
 * @param beforeSendCallback
 * @returns {jQuery.jqXHR}
 */
tv.service.flight.FlightBookingService.prototype.bookFlight = function(data, beforeSendCallback) {
  return $.ajax({
    url: this._getAPIUrl(this.API.BOOKING),
    data: JSON.stringify(data),
    beforeSend: beforeSendCallback,
    timeout: 300000
  });
};

/**
 *
 * @param data
 */
tv.service.flight.FlightBookingService.prototype.validatePax = function(data) {
  var dataString = JSON.stringify(data);

  return $.ajax({
    url: this._getAPIUrl(this.API.PAX_VALIDATION),
    data: dataString
  });
};
</pre>
        </section>
        <section>
            <pre id="es6"></pre>
        </section>

    </div>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
    <script src="js/bundle.js"></script>
</body>
</html>